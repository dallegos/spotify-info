<svg
    width="480"
    height="133"
    xmlns="http://www.w3.org/2000/svg"
    xmlns:xlink="http://www.w3.org/1999/xlink"
>
    <foreignObject width="480" height="133">
        <div xmlns="http://www.w3.org/1999/xhtml" class="container">
            <style>
                :root {
                    --border-radius: 4px;
                    --info-size: 330px;
                    --color-background-box: linear-gradient(
                        125deg,
                        rgba(0, 0, 0, 1) 0%,
                        rgba(51, 51, 51, 1) 100%
                    );
                    --color-song-name: #9f9f9f;
                    --color-background-bars: #eaeaea;
                    --bars-width: 3px;
                    --bars-height: 16px;
                    --bars-animation-time: 15s;
                }

                a {
                    text-decoration: none;
                }

                .main {
                    display: flex;
                    font-family: -apple-system, BlinkMacSystemFont, Segoe UI,
                        Helvetica, Arial, sans-serif;
                }

                .container {
                    border-radius: var(--border-radius);
                    background: var(--color-background-box);
                    padding: 8px;
                }

                .art {
                    margin-right: 12px;
                }

                .art img {
                    object-fit: cover;
                    width: 100px;
                    height: 100px;
                    border-radius: var(--border-radius);
                }

                .ellipsis {
                    overflow: hidden;
                    white-space: nowrap;
                    text-overflow: ellipsis;
                }

                .song {
                    width: var(--info-size);
                    color: var(--color-song-name);
                    font-size: 24px;
                }

                .artist {
                    width: var(--info-size);
                    color: white;
                    font-size: 20px;
                    margin-top: 4px;
                    margin-bottom: 5px;
                }

                @keyframes bounce {
                    10% {
                        transform: scaleY(0.3); /* start by scaling to 30% */
                    }

                    30% {
                        transform: scaleY(1); /* scale up to 100% */
                    }

                    60% {
                        transform: scaleY(0.5); /* scale down to 50% */
                    }

                    80% {
                        transform: scaleY(0.75); /* scale up to 75% */
                    }

                    100% {
                        transform: scaleY(0.6); /* scale down to 60% */
                    }
                }

                #newBars {
                    margin-top: 24px;
                    display: flex;
                    gap: 2px;
                }

                #newBars div {
                    background-color: white;
                    height: var(--bars-height);
                    width: var(--bars-width);
                    border-radius: var(--border-radius);
                    transform-origin: bottom;
                    animation: bounce 2.2s ease infinite alternate;
                }

                #newBars div:nth-child(5n + 1) {
                    animation-delay: -1.2s;
                }

                #newBars div:nth-child(6n + 2) {
                    animation-delay: -3s;
                }

                #newBars div:nth-child(9n + 3) {
                    animation-delay: -2.5s;
                }

                #newBars div:nth-child(3n + 4) {
                    animation-delay: -1.9s;
                }

                #newBars div:nth-child(7n + 5) {
                    animation-delay: -4.2s;
                }

                #newBars div:nth-child(4n + 6) {
                    animation-delay: -2.3s;
                }

                #newBars div:nth-child(7n + 7) {
                    animation-delay: -7.8s;
                }
            </style>

            <div class="main">
                <a class="art" href="{{ songLink }}" target="_blank">
                    <img src="data:image/png;base64, {{ image }}" />
                </a>

                <div class="content">
                    <a href="{{ songLink }}" target="_blank">
                        <div class="song ellipsis">{{ songName }}</div>
                    </a>

                    <a href="{{ artistLink }}" target="_blank">
                        <div class="artist ellipsis">{{ artistName }}</div>
                    </a>

                    <div id="newBars">{{ bars }}</div>
                </div>
            </div>
        </div>
    </foreignObject>
</svg>
